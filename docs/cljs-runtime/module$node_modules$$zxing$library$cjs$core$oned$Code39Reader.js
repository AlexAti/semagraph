shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$Code39Reader=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=
null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__values=this&&this.__values||function(o){var s="function"===typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"===typeof o.length)return{next:function(){o&&i>=o.length&&(o=void 0);return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("module$node_modules$$zxing$library$cjs$core$BarcodeFormat"),
ChecksumException_1=require("module$node_modules$$zxing$library$cjs$core$ChecksumException"),FormatException_1=require("module$node_modules$$zxing$library$cjs$core$FormatException"),NotFoundException_1=require("module$node_modules$$zxing$library$cjs$core$NotFoundException");global=require("module$node_modules$$zxing$library$cjs$core$oned$OneDReader");var Result_1=require("module$node_modules$$zxing$library$cjs$core$Result"),ResultPoint_1=require("module$node_modules$$zxing$library$cjs$core$ResultPoint");
require=function(_super){function Code39Reader(usingCheckDigit,extendedMode){void 0===usingCheckDigit&&(usingCheckDigit=!1);void 0===extendedMode&&(extendedMode=!1);var _this=_super.call(this)||this;_this.usingCheckDigit=usingCheckDigit;_this.extendedMode=extendedMode;_this.decodeRowResult="";_this.counters=new Int32Array(9);return _this}__extends(Code39Reader,_super);Code39Reader.prototype.decodeRow=function(rowNumber,row,hints){var e_1,_a,_b,theCounters=this.counters;theCounters.fill(0);this.decodeRowResult=
"";hints=Code39Reader.findAsteriskPattern(row,theCounters);var nextStart=row.getNextSet(hints[1]),end=row.getSize();do{Code39Reader.recordPattern(row,nextStart,theCounters);var lastStart=Code39Reader.toNarrowWidePattern(theCounters);if(0>lastStart)throw new NotFoundException_1.default;var decodedChar=Code39Reader.patternToChar(lastStart);this.decodeRowResult+=decodedChar;lastStart=nextStart;try{for(var theCounters_1=(e_1=void 0,__values(theCounters)),theCounters_1_1=theCounters_1.next();!theCounters_1_1.done;theCounters_1_1=
theCounters_1.next()){var counter=theCounters_1_1.value;nextStart+=counter}}catch(e_1_1){e_1={error:e_1_1}}finally{try{theCounters_1_1&&!theCounters_1_1.done&&(_a=theCounters_1.return)&&_a.call(theCounters_1)}finally{if(e_1)throw e_1.error;}}nextStart=row.getNextSet(nextStart)}while("*"!==decodedChar);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);row=0;try{for(var theCounters_2=__values(theCounters),theCounters_2_1=theCounters_2.next();!theCounters_2_1.done;theCounters_2_1=
theCounters_2.next())counter=theCounters_2_1.value,row+=counter}catch(e_2_1){var e_2={error:e_2_1}}finally{try{theCounters_2_1&&!theCounters_2_1.done&&(_b=theCounters_2.return)&&_b.call(theCounters_2)}finally{if(e_2)throw e_2.error;}}if(nextStart!==end&&2*(nextStart-lastStart-row)<row)throw new NotFoundException_1.default;if(this.usingCheckDigit){e_2=this.decodeRowResult.length-1;for(counter=_b=0;counter<e_2;counter++)_b+=Code39Reader.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(counter));
if(this.decodeRowResult.charAt(e_2)!==Code39Reader.ALPHABET_STRING.charAt(_b%43))throw new ChecksumException_1.default;this.decodeRowResult=this.decodeRowResult.substring(0,e_2)}if(0===this.decodeRowResult.length)throw new NotFoundException_1.default;e_2=this.extendedMode?Code39Reader.decodeExtended(this.decodeRowResult):this.decodeRowResult;lastStart+=row/2;return new Result_1.default(e_2,null,0,[new ResultPoint_1.default((hints[1]+hints[0])/2,rowNumber),new ResultPoint_1.default(lastStart,rowNumber)],
BarcodeFormat_1.default.CODE_39,(new Date).getTime())};Code39Reader.findAsteriskPattern=function(row,counters){for(var width=row.getSize(),rowOffset=row.getNextSet(0),counterPosition=0,patternStart=rowOffset,isWhite=!1,patternLength=counters.length;rowOffset<width;rowOffset++)if(row.get(rowOffset)!==isWhite)counters[counterPosition]++;else{if(counterPosition===patternLength-1){if(this.toNarrowWidePattern(counters)===Code39Reader.ASTERISK_ENCODING&&row.isRange(Math.max(0,patternStart-Math.floor((rowOffset-
patternStart)/2)),patternStart,!1))return[patternStart,rowOffset];patternStart+=counters[0]+counters[1];counters.copyWithin(0,2,2+counterPosition-1);counters[counterPosition-1]=0;counters[counterPosition]=0;counterPosition--}else counterPosition++;counters[counterPosition]=1;isWhite=!isWhite}throw new NotFoundException_1.default;};Code39Reader.toNarrowWidePattern=function(counters){var e_3,_a,numCounters=counters.length,maxNarrowCounter=0;do{var wideCounters=2147483647;try{for(var counters_1=(e_3=
void 0,__values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next()){var counter=counters_1_1.value;counter<wideCounters&&counter>maxNarrowCounter&&(wideCounters=counter)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&_a.call(counters_1)}finally{if(e_3)throw e_3.error;}}maxNarrowCounter=wideCounters;for(var totalWideCountersWidth=wideCounters=0,pattern=0,i=0;i<numCounters;i++)counter=counters[i],counter>
maxNarrowCounter&&(pattern|=1<<numCounters-1-i,wideCounters++,totalWideCountersWidth+=counter);if(3===wideCounters){for(i=0;i<numCounters&&0<wideCounters;i++)if(counter=counters[i],counter>maxNarrowCounter&&(wideCounters--,2*counter>=totalWideCountersWidth))return-1;return pattern}}while(3<wideCounters);return-1};Code39Reader.patternToChar=function(pattern){for(var i=0;i<Code39Reader.CHARACTER_ENCODINGS.length;i++)if(Code39Reader.CHARACTER_ENCODINGS[i]===pattern)return Code39Reader.ALPHABET_STRING.charAt(i);
if(pattern===Code39Reader.ASTERISK_ENCODING)return"*";throw new NotFoundException_1.default;};Code39Reader.decodeExtended=function(encoded){for(var length=encoded.length,decoded="",i=0;i<length;i++){var c=encoded.charAt(i);if("+"===c||"$"===c||"%"===c||"/"===c){var next=encoded.charAt(i+1),decodedChar="\x00";switch(c){case "+":if("A"<=next&&"Z">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)+32);else throw new FormatException_1.default;break;case "$":if("A"<=next&&"Z">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)-
64);else throw new FormatException_1.default;break;case "%":if("A"<=next&&"E">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)-38);else if("F"<=next&&"J">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)-11);else if("K"<=next&&"O">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)+16);else if("P"<=next&&"T">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)+43);else if("U"===next)decodedChar="\x00";else if("V"===next)decodedChar="@";else if("W"===next)decodedChar="`";else if("X"===
next||"Y"===next||"Z"===next)decodedChar="";else throw new FormatException_1.default;break;case "/":if("A"<=next&&"O">=next)decodedChar=String.fromCharCode(next.charCodeAt(0)-32);else if("Z"===next)decodedChar=":";else throw new FormatException_1.default;}decoded+=decodedChar;i++}else decoded+=c}return decoded};Code39Reader.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%";Code39Reader.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,
19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42];Code39Reader.ASTERISK_ENCODING=148;return Code39Reader}(global.default);exports.default=require}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$Code39Reader.js.map

shadow$provide.module$node_modules$$zxing$library$cjs$core$qrcode$decoder$Decoder=function(global,require,module,exports){var __values=this&&this.__values||function(o){var s="function"===typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"===typeof o.length)return{next:function(){o&&i>=o.length&&(o=void 0);return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(exports,"__esModule",{value:!0});
var ChecksumException_1=require("module$node_modules$$zxing$library$cjs$core$ChecksumException"),BitMatrix_1=require("module$node_modules$$zxing$library$cjs$core$common$BitMatrix"),GenericGF_1=require("module$node_modules$$zxing$library$cjs$core$common$reedsolomon$GenericGF"),ReedSolomonDecoder_1=require("module$node_modules$$zxing$library$cjs$core$common$reedsolomon$ReedSolomonDecoder"),BitMatrixParser_1=require("module$node_modules$$zxing$library$cjs$core$qrcode$decoder$BitMatrixParser"),DataBlock_1=
require("module$node_modules$$zxing$library$cjs$core$qrcode$decoder$DataBlock"),DecodedBitStreamParser_1=require("module$node_modules$$zxing$library$cjs$core$qrcode$decoder$DecodedBitStreamParser"),QRCodeDecoderMetaData_1=require("module$node_modules$$zxing$library$cjs$core$qrcode$decoder$QRCodeDecoderMetaData");global=function(){function Decoder(){this.rsDecoder=new ReedSolomonDecoder_1.default(GenericGF_1.default.QR_CODE_FIELD_256)}Decoder.prototype.decodeBooleanArray=function(image,hints){return this.decodeBitMatrix(BitMatrix_1.default.parseFromBooleanArray(image),
hints)};Decoder.prototype.decodeBitMatrix=function(bits,hints){bits=new BitMatrixParser_1.default(bits);try{return this.decodeBitMatrixParser(bits,hints)}catch(e){var ex=e}try{bits.remask();bits.setMirror(!0);bits.readVersion();bits.readFormatInformation();bits.mirror();var result=this.decodeBitMatrixParser(bits,hints);result.setOther(new QRCodeDecoderMetaData_1.default(!0));return result}catch(e){if(null!==ex)throw ex;throw e;}};Decoder.prototype.decodeBitMatrixParser=function(parser,hints){var _a,
_b,version=parser.readVersion(),ecLevel=parser.readFormatInformation().getErrorCorrectionLevel();parser=parser.readCodewords();parser=DataBlock_1.default.getDataBlocks(parser,version,ecLevel);var totalBytes=0;try{for(var dataBlocks_1=__values(parser),dataBlocks_1_1=dataBlocks_1.next();!dataBlocks_1_1.done;dataBlocks_1_1=dataBlocks_1.next()){var dataBlock=dataBlocks_1_1.value;totalBytes+=dataBlock.getNumDataCodewords()}}catch(e_1_1){var e_1={error:e_1_1}}finally{try{dataBlocks_1_1&&!dataBlocks_1_1.done&&
(_a=dataBlocks_1.return)&&_a.call(dataBlocks_1)}finally{if(e_1)throw e_1.error;}}e_1=new Uint8Array(totalBytes);_a=0;try{for(var dataBlocks_2=__values(parser),dataBlocks_2_1=dataBlocks_2.next();!dataBlocks_2_1.done;dataBlocks_2_1=dataBlocks_2.next()){dataBlock=dataBlocks_2_1.value;var codewordBytes=dataBlock.getCodewords(),numDataCodewords=dataBlock.getNumDataCodewords();this.correctErrors(codewordBytes,numDataCodewords);for(parser=0;parser<numDataCodewords;parser++)e_1[_a++]=codewordBytes[parser]}}catch(e_2_1){var e_2=
{error:e_2_1}}finally{try{dataBlocks_2_1&&!dataBlocks_2_1.done&&(_b=dataBlocks_2.return)&&_b.call(dataBlocks_2)}finally{if(e_2)throw e_2.error;}}return DecodedBitStreamParser_1.default.decode(e_1,version,ecLevel,hints)};Decoder.prototype.correctErrors=function(codewordBytes,numDataCodewords){var codewordsInts=new Int32Array(codewordBytes);try{this.rsDecoder.decode(codewordsInts,codewordBytes.length-numDataCodewords)}catch(ignored){throw new ChecksumException_1.default;}for(var i=0;i<numDataCodewords;i++)codewordBytes[i]=
codewordsInts[i]};return Decoder}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$qrcode$decoder$Decoder.js.map

shadow$provide.module$node_modules$$zxing$library$cjs$core$datamatrix$decoder$DecodedBitStreamParser=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var DecoderResult_1=require("module$node_modules$$zxing$library$cjs$core$common$DecoderResult"),BitSource_1=require("module$node_modules$$zxing$library$cjs$core$common$BitSource"),StringBuilder_1=require("module$node_modules$$zxing$library$cjs$core$util$StringBuilder"),StringEncoding_1=require("module$node_modules$$zxing$library$cjs$core$util$StringEncoding"),
StringUtils_1=require("module$node_modules$$zxing$library$cjs$core$common$StringUtils"),FormatException_1=require("module$node_modules$$zxing$library$cjs$core$FormatException"),IllegalStateException_1=require("module$node_modules$$zxing$library$cjs$core$IllegalStateException"),Mode$jscomp$0;(function(Mode){Mode[Mode.PAD_ENCODE=0]="PAD_ENCODE";Mode[Mode.ASCII_ENCODE=1]="ASCII_ENCODE";Mode[Mode.C40_ENCODE=2]="C40_ENCODE";Mode[Mode.TEXT_ENCODE=3]="TEXT_ENCODE";Mode[Mode.ANSIX12_ENCODE=4]="ANSIX12_ENCODE";
Mode[Mode.EDIFACT_ENCODE=5]="EDIFACT_ENCODE";Mode[Mode.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mode$jscomp$0||(Mode$jscomp$0={}));global=function(){function DecodedBitStreamParser(){}DecodedBitStreamParser.decode=function(bytes){var bits=new BitSource_1.default(bytes),result=new StringBuilder_1.default,resultTrailer=new StringBuilder_1.default,byteSegments=[],mode=Mode$jscomp$0.ASCII_ENCODE;do if(mode===Mode$jscomp$0.ASCII_ENCODE)mode=this.decodeAsciiSegment(bits,result,resultTrailer);else{switch(mode){case Mode$jscomp$0.C40_ENCODE:this.decodeC40Segment(bits,
result);break;case Mode$jscomp$0.TEXT_ENCODE:this.decodeTextSegment(bits,result);break;case Mode$jscomp$0.ANSIX12_ENCODE:this.decodeAnsiX12Segment(bits,result);break;case Mode$jscomp$0.EDIFACT_ENCODE:this.decodeEdifactSegment(bits,result);break;case Mode$jscomp$0.BASE256_ENCODE:this.decodeBase256Segment(bits,result,byteSegments);break;default:throw new FormatException_1.default;}mode=Mode$jscomp$0.ASCII_ENCODE}while(mode!==Mode$jscomp$0.PAD_ENCODE&&0<bits.available());0<resultTrailer.length()&&result.append(resultTrailer.toString());
return new DecoderResult_1.default(bytes,result.toString(),0===byteSegments.length?null:byteSegments,null)};DecodedBitStreamParser.decodeAsciiSegment=function(bits,result,resultTrailer){var upperShift=!1;do{var oneByte=bits.readBits(8);if(0===oneByte)throw new FormatException_1.default;if(128>=oneByte){upperShift&&(oneByte+=128);result.append(String.fromCharCode(oneByte-1));break}else{if(129===oneByte)return Mode$jscomp$0.PAD_ENCODE;if(229>=oneByte)oneByte-=130,10>oneByte&&result.append("0"),result.append(""+
oneByte);else switch(oneByte){case 230:return Mode$jscomp$0.C40_ENCODE;case 231:return Mode$jscomp$0.BASE256_ENCODE;case 232:result.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:upperShift=!0;break;case 236:result.append("[)\x3e05");resultTrailer.insert(0,"");break;case 237:result.append("[)\x3e06");resultTrailer.insert(0,"");break;case 238:return Mode$jscomp$0.ANSIX12_ENCODE;case 239:return Mode$jscomp$0.TEXT_ENCODE;case 240:return Mode$jscomp$0.EDIFACT_ENCODE;case 241:break;
default:if(254!==oneByte||0!==bits.available())throw new FormatException_1.default;}}}while(0<bits.available());return Mode$jscomp$0.ASCII_ENCODE};DecodedBitStreamParser.decodeC40Segment=function(bits,result){var upperShift=!1,cValues=[],shift=0;do{if(8===bits.available())break;var firstByte=bits.readBits(8);if(254===firstByte)break;this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(firstByte=0;3>firstByte;firstByte++){var cValue=cValues[firstByte];switch(shift){case 0:if(3>cValue)shift=cValue+
1;else if(cValue<this.C40_BASIC_SET_CHARS.length)cValue=this.C40_BASIC_SET_CHARS[cValue],upperShift?(result.append(String.fromCharCode(cValue.charCodeAt(0)+128)),upperShift=!1):result.append(cValue);else throw new FormatException_1.default;break;case 1:upperShift?(result.append(String.fromCharCode(cValue+128)),upperShift=!1):result.append(String.fromCharCode(cValue));shift=0;break;case 2:if(cValue<this.C40_SHIFT2_SET_CHARS.length)cValue=this.C40_SHIFT2_SET_CHARS[cValue],upperShift?(result.append(String.fromCharCode(cValue.charCodeAt(0)+
128)),upperShift=!1):result.append(cValue);else switch(cValue){case 27:result.append(String.fromCharCode(29));break;case 30:upperShift=!0;break;default:throw new FormatException_1.default;}shift=0;break;case 3:upperShift?(result.append(String.fromCharCode(cValue+224)),upperShift=!1):result.append(String.fromCharCode(cValue+96));shift=0;break;default:throw new FormatException_1.default;}}}while(0<bits.available())};DecodedBitStreamParser.decodeTextSegment=function(bits,result){var upperShift=!1,cValues=
[],shift=0;do{if(8===bits.available())break;var firstByte=bits.readBits(8);if(254===firstByte)break;this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(firstByte=0;3>firstByte;firstByte++){var cValue=cValues[firstByte];switch(shift){case 0:if(3>cValue)shift=cValue+1;else if(cValue<this.TEXT_BASIC_SET_CHARS.length)cValue=this.TEXT_BASIC_SET_CHARS[cValue],upperShift?(result.append(String.fromCharCode(cValue.charCodeAt(0)+128)),upperShift=!1):result.append(cValue);else throw new FormatException_1.default;
break;case 1:upperShift?(result.append(String.fromCharCode(cValue+128)),upperShift=!1):result.append(String.fromCharCode(cValue));shift=0;break;case 2:if(cValue<this.TEXT_SHIFT2_SET_CHARS.length)cValue=this.TEXT_SHIFT2_SET_CHARS[cValue],upperShift?(result.append(String.fromCharCode(cValue.charCodeAt(0)+128)),upperShift=!1):result.append(cValue);else switch(cValue){case 27:result.append(String.fromCharCode(29));break;case 30:upperShift=!0;break;default:throw new FormatException_1.default;}shift=0;
break;case 3:if(cValue<this.TEXT_SHIFT3_SET_CHARS.length)cValue=this.TEXT_SHIFT3_SET_CHARS[cValue],upperShift?(result.append(String.fromCharCode(cValue.charCodeAt(0)+128)),upperShift=!1):result.append(cValue),shift=0;else throw new FormatException_1.default;break;default:throw new FormatException_1.default;}}}while(0<bits.available())};DecodedBitStreamParser.decodeAnsiX12Segment=function(bits,result){var cValues=[];do{if(8===bits.available())break;var firstByte=bits.readBits(8);if(254===firstByte)break;
this.parseTwoBytes(firstByte,bits.readBits(8),cValues);for(firstByte=0;3>firstByte;firstByte++){var cValue=cValues[firstByte];switch(cValue){case 0:result.append("\r");break;case 1:result.append("*");break;case 2:result.append("\x3e");break;case 3:result.append(" ");break;default:if(14>cValue)result.append(String.fromCharCode(cValue+44));else if(40>cValue)result.append(String.fromCharCode(cValue+51));else throw new FormatException_1.default;}}}while(0<bits.available())};DecodedBitStreamParser.parseTwoBytes=
function(firstByte,secondByte,result){firstByte=(firstByte<<8)+secondByte-1;secondByte=Math.floor(firstByte/1600);result[0]=secondByte;firstByte-=1600*secondByte;secondByte=Math.floor(firstByte/40);result[1]=secondByte;result[2]=firstByte-40*secondByte};DecodedBitStreamParser.decodeEdifactSegment=function(bits,result){do{if(16>=bits.available())break;for(var i=0;4>i;i++){var edifactValue=bits.readBits(6);if(31===edifactValue){result=8-bits.getBitOffset();8!==result&&bits.readBits(result);return}0===
(edifactValue&32)&&(edifactValue|=64);result.append(String.fromCharCode(edifactValue))}}while(0<bits.available())};DecodedBitStreamParser.decodeBase256Segment=function(bits,result,byteSegments){var codewordPosition=1+bits.getByteOffset(),d1=this.unrandomize255State(bits.readBits(8),codewordPosition++);d1=0===d1?bits.available()/8|0:250>d1?d1:250*(d1-249)+this.unrandomize255State(bits.readBits(8),codewordPosition++);if(0>d1)throw new FormatException_1.default;for(var bytes=new Uint8Array(d1),i=0;i<
d1;i++){if(8>bits.available())throw new FormatException_1.default;bytes[i]=this.unrandomize255State(bits.readBits(8),codewordPosition++)}byteSegments.push(bytes);try{result.append(StringEncoding_1.default.decode(bytes,StringUtils_1.default.ISO88591))}catch(uee){throw new IllegalStateException_1.default("Platform does not support required encoding: "+uee.message);}};DecodedBitStreamParser.unrandomize255State=function(randomizedBase256Codeword,base256CodewordPosition){randomizedBase256Codeword-=149*
base256CodewordPosition%255+1;return 0<=randomizedBase256Codeword?randomizedBase256Codeword:randomizedBase256Codeword+256};DecodedBitStreamParser.C40_BASIC_SET_CHARS="*** 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");DecodedBitStreamParser.C40_SHIFT2_SET_CHARS="!\"#$%\x26'()*+,-./:;\x3c\x3d\x3e?@[\\]^_".split("");DecodedBitStreamParser.TEXT_BASIC_SET_CHARS="*** 0123456789abcdefghijklmnopqrstuvwxyz".split("");DecodedBitStreamParser.TEXT_SHIFT2_SET_CHARS=DecodedBitStreamParser.C40_SHIFT2_SET_CHARS;
DecodedBitStreamParser.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];return DecodedBitStreamParser}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$datamatrix$decoder$DecodedBitStreamParser.js.map

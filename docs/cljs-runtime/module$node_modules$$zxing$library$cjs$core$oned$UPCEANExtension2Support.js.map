{
"version":3,
"file":"module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension2Support.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@zxing/library/cjs/core/oned/UPCEANExtension2Support.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension2Support\"] = function(global,require,module,exports) {\n\"use strict\";\n/*\n * Copyright (C) 2012 ZXing authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BarcodeFormat_1 = require(\"../BarcodeFormat\");\nvar AbstractUPCEANReader_1 = require(\"./AbstractUPCEANReader\");\nvar Result_1 = require(\"../Result\");\nvar ResultPoint_1 = require(\"../ResultPoint\");\nvar ResultMetadataType_1 = require(\"../ResultMetadataType\");\nvar NotFoundException_1 = require(\"../NotFoundException\");\n/**\n * @see UPCEANExtension5Support\n */\nvar UPCEANExtension2Support = /** @class */ (function () {\n    function UPCEANExtension2Support() {\n        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);\n        this.decodeRowStringBuffer = '';\n    }\n    UPCEANExtension2Support.prototype.decodeRow = function (rowNumber, row, extensionStartRange) {\n        var result = this.decodeRowStringBuffer;\n        var end = this.decodeMiddle(row, extensionStartRange, result);\n        var resultString = result.toString();\n        var extensionData = UPCEANExtension2Support.parseExtensionString(resultString);\n        var resultPoints = [\n            new ResultPoint_1.default((extensionStartRange[0] + extensionStartRange[1]) / 2.0, rowNumber),\n            new ResultPoint_1.default(end, rowNumber)\n        ];\n        var extensionResult = new Result_1.default(resultString, null, 0, resultPoints, BarcodeFormat_1.default.UPC_EAN_EXTENSION, new Date().getTime());\n        if (extensionData != null) {\n            extensionResult.putAllMetadata(extensionData);\n        }\n        return extensionResult;\n    };\n    UPCEANExtension2Support.prototype.decodeMiddle = function (row, startRange, resultString) {\n        var e_1, _a;\n        var counters = this.decodeMiddleCounters;\n        counters[0] = 0;\n        counters[1] = 0;\n        counters[2] = 0;\n        counters[3] = 0;\n        var end = row.getSize();\n        var rowOffset = startRange[1];\n        var checkParity = 0;\n        for (var x = 0; x < 2 && rowOffset < end; x++) {\n            var bestMatch = AbstractUPCEANReader_1.default.decodeDigit(row, counters, rowOffset, AbstractUPCEANReader_1.default.L_AND_G_PATTERNS);\n            resultString += String.fromCharCode(('0'.charCodeAt(0) + bestMatch % 10));\n            try {\n                for (var counters_1 = (e_1 = void 0, __values(counters)), counters_1_1 = counters_1.next(); !counters_1_1.done; counters_1_1 = counters_1.next()) {\n                    var counter = counters_1_1.value;\n                    rowOffset += counter;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (counters_1_1 && !counters_1_1.done && (_a = counters_1.return)) _a.call(counters_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (bestMatch >= 10) {\n                checkParity |= 1 << (1 - x);\n            }\n            if (x !== 1) {\n                // Read off separator if not last\n                rowOffset = row.getNextSet(rowOffset);\n                rowOffset = row.getNextUnset(rowOffset);\n            }\n        }\n        if (resultString.length !== 2) {\n            throw new NotFoundException_1.default();\n        }\n        if (parseInt(resultString.toString()) % 4 !== checkParity) {\n            throw new NotFoundException_1.default();\n        }\n        return rowOffset;\n    };\n    UPCEANExtension2Support.parseExtensionString = function (raw) {\n        if (raw.length !== 2) {\n            return null;\n        }\n        return new Map([[ResultMetadataType_1.default.ISSUE_NUMBER, parseInt(raw)]]);\n    };\n    return UPCEANExtension2Support;\n}());\nexports.default = UPCEANExtension2Support;\n//# sourceMappingURL=UPCEANExtension2Support.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","Object","defineProperty","BarcodeFormat_1","AbstractUPCEANReader_1","Result_1","ResultPoint_1","ResultMetadataType_1","NotFoundException_1","UPCEANExtension2Support","decodeMiddleCounters","Int32Array","from","decodeRowStringBuffer","prototype","decodeRow","UPCEANExtension2Support.prototype.decodeRow","rowNumber","row","extensionStartRange","result","end","decodeMiddle","resultString","toString","extensionData","parseExtensionString","resultPoints","default","extensionResult","UPC_EAN_EXTENSION","getTime","Date","putAllMetadata","UPCEANExtension2Support.prototype.decodeMiddle","startRange","e_1","_a","counters","getSize","rowOffset","checkParity","x","bestMatch","decodeDigit","L_AND_G_PATTERNS","String","fromCharCode","counters_1","counters_1_1","e_1_1","error","return","getNextSet","getNextUnset","parseInt","UPCEANExtension2Support.parseExtensionString","raw","Map","ISSUE_NUMBER"]
}

shadow$provide.module$node_modules$$zxing$library$cjs$core$qrcode$encoder$MatrixUtil=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("module$node_modules$$zxing$library$cjs$core$common$BitArray"),Integer_1=require("module$node_modules$$zxing$library$cjs$core$util$Integer"),QRCode_1=require("module$node_modules$$zxing$library$cjs$core$qrcode$encoder$QRCode"),MaskUtil_1=require("module$node_modules$$zxing$library$cjs$core$qrcode$encoder$MaskUtil"),
WriterException_1=require("module$node_modules$$zxing$library$cjs$core$WriterException"),IllegalArgumentException_1=require("module$node_modules$$zxing$library$cjs$core$IllegalArgumentException");global=function(){function MatrixUtil(){}MatrixUtil.clearMatrix=function(matrix){matrix.clear(255)};MatrixUtil.buildMatrix=function(dataBits,ecLevel,version,maskPattern,matrix){MatrixUtil.clearMatrix(matrix);MatrixUtil.embedBasicPatterns(version,matrix);MatrixUtil.embedTypeInfo(ecLevel,maskPattern,matrix);
MatrixUtil.maybeEmbedVersionInfo(version,matrix);MatrixUtil.embedDataBits(dataBits,maskPattern,matrix)};MatrixUtil.embedBasicPatterns=function(version,matrix){MatrixUtil.embedPositionDetectionPatternsAndSeparators(matrix);MatrixUtil.embedDarkDotAtLeftBottomCorner(matrix);MatrixUtil.maybeEmbedPositionAdjustmentPatterns(version,matrix);MatrixUtil.embedTimingPatterns(matrix)};MatrixUtil.embedTypeInfo=function(ecLevel,maskPattern,matrix){var typeInfoBits=new BitArray_1.default;MatrixUtil.makeTypeInfoBits(ecLevel,
maskPattern,typeInfoBits);ecLevel=0;for(maskPattern=typeInfoBits.getSize();ecLevel<maskPattern;++ecLevel){var bit=typeInfoBits.get(typeInfoBits.getSize()-1-ecLevel),coordinates=MatrixUtil.TYPE_INFO_COORDINATES[ecLevel];matrix.setBoolean(coordinates[0],coordinates[1],bit);if(8>ecLevel){coordinates=matrix.getWidth()-ecLevel-1;var y2=8}else coordinates=8,y2=matrix.getHeight()-7+(ecLevel-8);matrix.setBoolean(coordinates,y2,bit)}};MatrixUtil.maybeEmbedVersionInfo=function(version,matrix){if(!(7>version.getVersionNumber())){var versionInfoBits=
new BitArray_1.default;MatrixUtil.makeVersionInfoBits(version,versionInfoBits);version=17;for(var i=0;6>i;++i)for(var j=0;3>j;++j){var bit=versionInfoBits.get(version);version--;matrix.setBoolean(i,matrix.getHeight()-11+j,bit);matrix.setBoolean(matrix.getHeight()-11+j,i,bit)}}};MatrixUtil.embedDataBits=function(dataBits,maskPattern,matrix){for(var bitIndex=0,direction=-1,x=matrix.getWidth()-1,y=matrix.getHeight()-1;0<x;){for(6===x&&--x;0<=y&&y<matrix.getHeight();){for(var i=0;2>i;++i){var xx=x-i;
if(MatrixUtil.isEmpty(matrix.get(xx,y))){if(bitIndex<dataBits.getSize()){var bit=dataBits.get(bitIndex);++bitIndex}else bit=!1;255!==maskPattern&&MaskUtil_1.default.getDataMaskBit(maskPattern,xx,y)&&(bit=!bit);matrix.setBoolean(xx,y,bit)}}y+=direction}direction=-direction;y+=direction;x-=2}if(bitIndex!==dataBits.getSize())throw new WriterException_1.default("Not all bits consumed: "+bitIndex+"/"+dataBits.getSize());};MatrixUtil.findMSBSet=function(value){return 32-Integer_1.default.numberOfLeadingZeros(value)};
MatrixUtil.calculateBCHCode=function(value,poly){if(0===poly)throw new IllegalArgumentException_1.default("0 polynomial");var msbSetInPoly=MatrixUtil.findMSBSet(poly);for(value<<=msbSetInPoly-1;MatrixUtil.findMSBSet(value)>=msbSetInPoly;)value^=poly<<MatrixUtil.findMSBSet(value)-msbSetInPoly;return value};MatrixUtil.makeTypeInfoBits=function(ecLevel,maskPattern,bits){if(!QRCode_1.default.isValidMaskPattern(maskPattern))throw new WriterException_1.default("Invalid mask pattern");ecLevel=ecLevel.getBits()<<
3|maskPattern;bits.appendBits(ecLevel,5);ecLevel=MatrixUtil.calculateBCHCode(ecLevel,MatrixUtil.TYPE_INFO_POLY);bits.appendBits(ecLevel,10);ecLevel=new BitArray_1.default;ecLevel.appendBits(MatrixUtil.TYPE_INFO_MASK_PATTERN,15);bits.xor(ecLevel);if(15!==bits.getSize())throw new WriterException_1.default("should not happen but we got: "+bits.getSize());};MatrixUtil.makeVersionInfoBits=function(version,bits){bits.appendBits(version.getVersionNumber(),6);version=MatrixUtil.calculateBCHCode(version.getVersionNumber(),
MatrixUtil.VERSION_INFO_POLY);bits.appendBits(version,12);if(18!==bits.getSize())throw new WriterException_1.default("should not happen but we got: "+bits.getSize());};MatrixUtil.isEmpty=function(value){return 255===value};MatrixUtil.embedTimingPatterns=function(matrix){for(var i=8;i<matrix.getWidth()-8;++i){var bit=(i+1)%2;MatrixUtil.isEmpty(matrix.get(i,6))&&matrix.setNumber(i,6,bit);MatrixUtil.isEmpty(matrix.get(6,i))&&matrix.setNumber(6,i,bit)}};MatrixUtil.embedDarkDotAtLeftBottomCorner=function(matrix){if(0===
matrix.get(8,matrix.getHeight()-8))throw new WriterException_1.default;matrix.setNumber(8,matrix.getHeight()-8,1)};MatrixUtil.embedHorizontalSeparationPattern=function(xStart,yStart,matrix){for(var x=0;8>x;++x){if(!MatrixUtil.isEmpty(matrix.get(xStart+x,yStart)))throw new WriterException_1.default;matrix.setNumber(xStart+x,yStart,0)}};MatrixUtil.embedVerticalSeparationPattern=function(xStart,yStart,matrix){for(var y=0;7>y;++y){if(!MatrixUtil.isEmpty(matrix.get(xStart,yStart+y)))throw new WriterException_1.default;
matrix.setNumber(xStart,yStart+y,0)}};MatrixUtil.embedPositionAdjustmentPattern=function(xStart,yStart,matrix){for(var y=0;5>y;++y)for(var patternY=MatrixUtil.POSITION_ADJUSTMENT_PATTERN[y],x=0;5>x;++x)matrix.setNumber(xStart+x,yStart+y,patternY[x])};MatrixUtil.embedPositionDetectionPattern=function(xStart,yStart,matrix){for(var y=0;7>y;++y)for(var patternY=MatrixUtil.POSITION_DETECTION_PATTERN[y],x=0;7>x;++x)matrix.setNumber(xStart+x,yStart+y,patternY[x])};MatrixUtil.embedPositionDetectionPatternsAndSeparators=
function(matrix){var pdpWidth=MatrixUtil.POSITION_DETECTION_PATTERN[0].length;MatrixUtil.embedPositionDetectionPattern(0,0,matrix);MatrixUtil.embedPositionDetectionPattern(matrix.getWidth()-pdpWidth,0,matrix);MatrixUtil.embedPositionDetectionPattern(0,matrix.getWidth()-pdpWidth,matrix);MatrixUtil.embedHorizontalSeparationPattern(0,7,matrix);MatrixUtil.embedHorizontalSeparationPattern(matrix.getWidth()-8,7,matrix);MatrixUtil.embedHorizontalSeparationPattern(0,matrix.getWidth()-8,matrix);MatrixUtil.embedVerticalSeparationPattern(7,
0,matrix);MatrixUtil.embedVerticalSeparationPattern(matrix.getHeight()-7-1,0,matrix);MatrixUtil.embedVerticalSeparationPattern(7,matrix.getHeight()-7,matrix)};MatrixUtil.maybeEmbedPositionAdjustmentPatterns=function(version,matrix){if(!(2>version.getVersionNumber())){version=version.getVersionNumber()-1;version=MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[version];for(var i=0,length_1=version.length;i!==length_1;i++){var y=version[i];if(0<=y)for(var j=0;j!==length_1;j++){var x=version[j];
0<=x&&MatrixUtil.isEmpty(matrix.get(x,y))&&MatrixUtil.embedPositionAdjustmentPattern(x-2,y-2,matrix)}}}};MatrixUtil.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]);MatrixUtil.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,
0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]);MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,
28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,
30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,
150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]);MatrixUtil.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,
8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]);MatrixUtil.VERSION_INFO_POLY=7973;MatrixUtil.TYPE_INFO_POLY=1335;MatrixUtil.TYPE_INFO_MASK_PATTERN=21522;return MatrixUtil}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$qrcode$encoder$MatrixUtil.js.map

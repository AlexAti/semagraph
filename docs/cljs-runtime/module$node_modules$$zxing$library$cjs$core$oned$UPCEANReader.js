shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$UPCEANReader=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=
null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});require("module$node_modules$$zxing$library$cjs$core$BarcodeFormat");var DecodeHintType_1=require("module$node_modules$$zxing$library$cjs$core$DecodeHintType"),Result_1=require("module$node_modules$$zxing$library$cjs$core$Result"),ResultMetadataType_1=require("module$node_modules$$zxing$library$cjs$core$ResultMetadataType"),ResultPoint_1=require("module$node_modules$$zxing$library$cjs$core$ResultPoint"),
UPCEANExtensionSupport_1=require("module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtensionSupport");global=require("module$node_modules$$zxing$library$cjs$core$oned$AbstractUPCEANReader");var NotFoundException_1=require("module$node_modules$$zxing$library$cjs$core$NotFoundException"),FormatException_1=require("module$node_modules$$zxing$library$cjs$core$FormatException"),ChecksumException_1=require("module$node_modules$$zxing$library$cjs$core$ChecksumException");require=function(_super){function UPCEANReader(){var _this=
_super.call(this)||this;_this.decodeRowStringBuffer="";UPCEANReader.L_AND_G_PATTERNS=UPCEANReader.L_PATTERNS.map(function(arr){return Int32Array.from(arr)});for(var i=10;20>i;i++){for(var widths=UPCEANReader.L_PATTERNS[i-10],reversedWidths=new Int32Array(widths.length),j=0;j<widths.length;j++)reversedWidths[j]=widths[widths.length-j-1];UPCEANReader.L_AND_G_PATTERNS[i]=reversedWidths}return _this}__extends(UPCEANReader,_super);UPCEANReader.prototype.decodeRow=function(rowNumber,row,hints){var startGuardRange=
UPCEANReader.findStartGuardPattern(row),resultPointCallback=null==hints?null:hints.get(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK);if(null!=resultPointCallback){var resultPoint_1=new ResultPoint_1.default((startGuardRange[0]+startGuardRange[1])/2,rowNumber);resultPointCallback.foundPossibleResultPoint(resultPoint_1)}var budello=this.decodeMiddle(row,startGuardRange,this.decodeRowStringBuffer);resultPoint_1=budello.rowOffset;budello=budello.resultString;if(null!=resultPointCallback){var resultPoint_2=
new ResultPoint_1.default(resultPoint_1,rowNumber);resultPointCallback.foundPossibleResultPoint(resultPoint_2)}resultPoint_1=UPCEANReader.decodeEnd(row,resultPoint_1);null!=resultPointCallback&&(resultPoint_2=new ResultPoint_1.default((resultPoint_1[0]+resultPoint_1[1])/2,rowNumber),resultPointCallback.foundPossibleResultPoint(resultPoint_2));resultPointCallback=resultPoint_1[1];resultPoint_2=resultPointCallback+(resultPointCallback-resultPoint_1[0]);if(resultPoint_2>=row.getSize()||!row.isRange(resultPointCallback,
resultPoint_2,!1))throw new NotFoundException_1.default;resultPointCallback=budello.toString();if(8>resultPointCallback.length)throw new FormatException_1.default;if(!UPCEANReader.checkChecksum(resultPointCallback))throw new ChecksumException_1.default;budello=(startGuardRange[1]+startGuardRange[0])/2;resultPoint_2=(resultPoint_1[1]+resultPoint_1[0])/2;startGuardRange=this.getBarcodeFormat();budello=[new ResultPoint_1.default(budello,rowNumber),new ResultPoint_1.default(resultPoint_2,rowNumber)];
startGuardRange=new Result_1.default(resultPointCallback,null,0,budello,startGuardRange,(new Date).getTime());resultPointCallback=0;try{var extensionResult=UPCEANExtensionSupport_1.default.decodeRow(rowNumber,row,resultPoint_1[1]);startGuardRange.putMetadata(ResultMetadataType_1.default.UPC_EAN_EXTENSION,extensionResult.getText());startGuardRange.putAllMetadata(extensionResult.getResultMetadata());startGuardRange.addResultPoints(extensionResult.getResultPoints());resultPointCallback=extensionResult.getText().length}catch(err){}rowNumber=
null==hints?null:hints.get(DecodeHintType_1.default.ALLOWED_EAN_EXTENSIONS);if(null!=rowNumber){row=!1;for(var length_1 in rowNumber)if(resultPointCallback.toString()===length_1){row=!0;break}if(!row)throw new NotFoundException_1.default;}return startGuardRange};UPCEANReader.checkChecksum=function(s){return UPCEANReader.checkStandardUPCEANChecksum(s)};UPCEANReader.checkStandardUPCEANChecksum=function(s){var length=s.length;if(0===length)return!1;var check=parseInt(s.charAt(length-1),10);return UPCEANReader.getStandardUPCEANChecksum(s.substring(0,
length-1))===check};UPCEANReader.getStandardUPCEANChecksum=function(s){for(var length=s.length,sum=0,i=length-1;0<=i;i-=2){var digit=s.charAt(i).charCodeAt(0)-48;if(0>digit||9<digit)throw new FormatException_1.default;sum+=digit}sum*=3;for(i=length-2;0<=i;i-=2){digit=s.charAt(i).charCodeAt(0)-48;if(0>digit||9<digit)throw new FormatException_1.default;sum+=digit}return(1E3-sum)%10};UPCEANReader.decodeEnd=function(row,endStart){return UPCEANReader.findGuardPattern(row,endStart,!1,UPCEANReader.START_END_PATTERN,
(new Int32Array(UPCEANReader.START_END_PATTERN.length)).fill(0))};return UPCEANReader}(global.default);exports.default=require}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$UPCEANReader.js.map

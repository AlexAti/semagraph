shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$GeneralAppIdDecoder=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var FormatException_1=require("module$node_modules$$zxing$library$cjs$core$FormatException"),IllegalStateException_1=require("module$node_modules$$zxing$library$cjs$core$IllegalStateException"),StringBuilder_1=require("module$node_modules$$zxing$library$cjs$core$util$StringBuilder"),BlockParsedResult_1=
require("module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$BlockParsedResult"),DecodedChar_1=require("module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$DecodedChar"),DecodedInformation_1=require("module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$DecodedInformation"),DecodedNumeric_1=require("module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$DecodedNumeric"),FieldParser_1=require("module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$FieldParser");
global=function(){function GeneralAppIdDecoder(information){this.buffer=new StringBuilder_1.default;this.information=information}GeneralAppIdDecoder.prototype.decodeAllCodes=function(buff,initialPosition){var remaining=null;do{var info=this.decodeGeneralPurposeField(initialPosition,remaining);remaining=FieldParser_1.default.parseFieldsInGeneralPurpose(info.getNewString());null!=remaining&&buff.append(remaining);remaining=info.isRemaining()?""+info.getRemainingValue():null;if(initialPosition===info.getNewPosition())break;
initialPosition=info.getNewPosition()}while(1);return buff.toString()};GeneralAppIdDecoder.prototype.isStillNumeric=function(pos){if(pos+7>this.information.getSize())return pos+4<=this.information.getSize();for(var i=pos;i<pos+3;++i)if(this.information.get(i))return!0;return this.information.get(pos+3)};GeneralAppIdDecoder.prototype.decodeNumeric=function(pos){if(pos+7>this.information.getSize())return pos=this.extractNumericValueFromBitArray(pos,4),0===pos?new DecodedNumeric_1.default(this.information.getSize(),
DecodedNumeric_1.default.FNC1,DecodedNumeric_1.default.FNC1):new DecodedNumeric_1.default(this.information.getSize(),pos-1,DecodedNumeric_1.default.FNC1);var numeric=this.extractNumericValueFromBitArray(pos,7);return new DecodedNumeric_1.default(pos+7,(numeric-8)/11,(numeric-8)%11)};GeneralAppIdDecoder.prototype.extractNumericValueFromBitArray=function(pos,bits){return GeneralAppIdDecoder.extractNumericValueFromBitArray(this.information,pos,bits)};GeneralAppIdDecoder.extractNumericValueFromBitArray=
function(information,pos,bits){for(var value=0,i=0;i<bits;++i)information.get(pos+i)&&(value|=1<<bits-i-1);return value};GeneralAppIdDecoder.prototype.decodeGeneralPurposeField=function(pos,remaining){this.buffer.setLengthToZero();null!=remaining&&this.buffer.append(remaining);this.current.setPosition(pos);pos=this.parseBlocks();return null!=pos&&pos.isRemaining()?new DecodedInformation_1.default(this.current.getPosition(),this.buffer.toString(),pos.getRemainingValue()):new DecodedInformation_1.default(this.current.getPosition(),
this.buffer.toString())};GeneralAppIdDecoder.prototype.parseBlocks=function(){do{var initialPosition=this.current.getPosition();var result=this.current.isAlpha()?this.parseAlphaBlock():this.current.isIsoIec646()?this.parseIsoIec646Block():this.parseNumericBlock();var isFinished=result.isFinished();if(initialPosition===this.current.getPosition()&&!isFinished)break}while(!isFinished);return result.getDecodedInformation()};GeneralAppIdDecoder.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var numeric=
this.decodeNumeric(this.current.getPosition());this.current.setPosition(numeric.getNewPosition());if(numeric.isFirstDigitFNC1())return numeric=numeric.isSecondDigitFNC1()?new DecodedInformation_1.default(this.current.getPosition(),this.buffer.toString()):new DecodedInformation_1.default(this.current.getPosition(),this.buffer.toString(),numeric.getSecondDigit()),new BlockParsedResult_1.default(!0,numeric);this.buffer.append(numeric.getFirstDigit());if(numeric.isSecondDigitFNC1())return numeric=new DecodedInformation_1.default(this.current.getPosition(),
this.buffer.toString()),new BlockParsedResult_1.default(!0,numeric);this.buffer.append(numeric.getSecondDigit())}this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4));return new BlockParsedResult_1.default(!1)};GeneralAppIdDecoder.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var iso=this.decodeIsoIec646(this.current.getPosition());this.current.setPosition(iso.getNewPosition());
if(iso.isFNC1())return iso=new DecodedInformation_1.default(this.current.getPosition(),this.buffer.toString()),new BlockParsedResult_1.default(!0,iso);this.buffer.append(iso.getValue())}this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),
this.current.setAlpha());return new BlockParsedResult_1.default(!1)};GeneralAppIdDecoder.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var alpha=this.decodeAlphanumeric(this.current.getPosition());this.current.setPosition(alpha.getNewPosition());if(alpha.isFNC1())return alpha=new DecodedInformation_1.default(this.current.getPosition(),this.buffer.toString()),new BlockParsedResult_1.default(!0,alpha);this.buffer.append(alpha.getValue())}this.isAlphaOr646ToNumericLatch(this.current.getPosition())?
(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646());return new BlockParsedResult_1.default(!1)};GeneralAppIdDecoder.prototype.isStillIsoIec646=function(pos){if(pos+5>this.information.getSize())return!1;var fiveBitValue=this.extractNumericValueFromBitArray(pos,
5);if(5<=fiveBitValue&&16>fiveBitValue)return!0;if(pos+7>this.information.getSize())return!1;fiveBitValue=this.extractNumericValueFromBitArray(pos,7);if(64<=fiveBitValue&&116>fiveBitValue)return!0;if(pos+8>this.information.getSize())return!1;pos=this.extractNumericValueFromBitArray(pos,8);return 232<=pos&&253>pos};GeneralAppIdDecoder.prototype.decodeIsoIec646=function(pos){var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(15===fiveBitValue)return new DecodedChar_1.default(pos+5,DecodedChar_1.default.FNC1);
if(5<=fiveBitValue&&15>fiveBitValue)return new DecodedChar_1.default(pos+5,"0"+(fiveBitValue-5));fiveBitValue=this.extractNumericValueFromBitArray(pos,7);if(64<=fiveBitValue&&90>fiveBitValue)return new DecodedChar_1.default(pos+7,""+(fiveBitValue+1));if(90<=fiveBitValue&&116>fiveBitValue)return new DecodedChar_1.default(pos+7,""+(fiveBitValue+7));switch(this.extractNumericValueFromBitArray(pos,8)){case 232:fiveBitValue="!";break;case 233:fiveBitValue='"';break;case 234:fiveBitValue="%";break;case 235:fiveBitValue=
"\x26";break;case 236:fiveBitValue="'";break;case 237:fiveBitValue="(";break;case 238:fiveBitValue=")";break;case 239:fiveBitValue="*";break;case 240:fiveBitValue="+";break;case 241:fiveBitValue=",";break;case 242:fiveBitValue="-";break;case 243:fiveBitValue=".";break;case 244:fiveBitValue="/";break;case 245:fiveBitValue=":";break;case 246:fiveBitValue=";";break;case 247:fiveBitValue="\x3c";break;case 248:fiveBitValue="\x3d";break;case 249:fiveBitValue="\x3e";break;case 250:fiveBitValue="?";break;
case 251:fiveBitValue="_";break;case 252:fiveBitValue=" ";break;default:throw new FormatException_1.default;}return new DecodedChar_1.default(pos+8,fiveBitValue)};GeneralAppIdDecoder.prototype.isStillAlpha=function(pos){if(pos+5>this.information.getSize())return!1;var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(5<=fiveBitValue&&16>fiveBitValue)return!0;if(pos+6>this.information.getSize())return!1;pos=this.extractNumericValueFromBitArray(pos,6);return 16<=pos&&63>pos};GeneralAppIdDecoder.prototype.decodeAlphanumeric=
function(pos){var fiveBitValue=this.extractNumericValueFromBitArray(pos,5);if(15===fiveBitValue)return new DecodedChar_1.default(pos+5,DecodedChar_1.default.FNC1);if(5<=fiveBitValue&&15>fiveBitValue)return new DecodedChar_1.default(pos+5,"0"+(fiveBitValue-5));fiveBitValue=this.extractNumericValueFromBitArray(pos,6);if(32<=fiveBitValue&&58>fiveBitValue)return new DecodedChar_1.default(pos+6,""+(fiveBitValue+33));switch(fiveBitValue){case 58:fiveBitValue="*";break;case 59:fiveBitValue=",";break;case 60:fiveBitValue=
"-";break;case 61:fiveBitValue=".";break;case 62:fiveBitValue="/";break;default:throw new IllegalStateException_1.default("Decoding invalid alphanumeric value: "+fiveBitValue);}return new DecodedChar_1.default(pos+6,fiveBitValue)};GeneralAppIdDecoder.prototype.isAlphaTo646ToAlphaLatch=function(pos){if(pos+1>this.information.getSize())return!1;for(var i=0;5>i&&i+pos<this.information.getSize();++i)if(2===i){if(!this.information.get(pos+2))return!1}else if(this.information.get(pos+i))return!1;return!0};
GeneralAppIdDecoder.prototype.isAlphaOr646ToNumericLatch=function(pos){if(pos+3>this.information.getSize())return!1;for(var i=pos;i<pos+3;++i)if(this.information.get(i))return!1;return!0};GeneralAppIdDecoder.prototype.isNumericToAlphaNumericLatch=function(pos){if(pos+1>this.information.getSize())return!1;for(var i=0;4>i&&i+pos<this.information.getSize();++i)if(this.information.get(pos+i))return!1;return!0};return GeneralAppIdDecoder}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$rss$expanded$decoders$GeneralAppIdDecoder.js.map

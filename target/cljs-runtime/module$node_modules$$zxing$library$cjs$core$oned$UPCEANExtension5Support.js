shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension5Support=function(global,require,module,exports){var __values=this&&this.__values||function(o){var s="function"===typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"===typeof o.length)return{next:function(){o&&i>=o.length&&(o=void 0);return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(exports,"__esModule",
{value:!0});var BarcodeFormat_1=require("module$node_modules$$zxing$library$cjs$core$BarcodeFormat"),AbstractUPCEANReader_1=require("module$node_modules$$zxing$library$cjs$core$oned$AbstractUPCEANReader"),Result_1=require("module$node_modules$$zxing$library$cjs$core$Result"),ResultPoint_1=require("module$node_modules$$zxing$library$cjs$core$ResultPoint"),ResultMetadataType_1=require("module$node_modules$$zxing$library$cjs$core$ResultMetadataType"),NotFoundException_1=require("module$node_modules$$zxing$library$cjs$core$NotFoundException");
global=function(){function UPCEANExtension5Support(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5];this.decodeMiddleCounters=Int32Array.from([0,0,0,0]);this.decodeRowStringBuffer=""}UPCEANExtension5Support.prototype.decodeRow=function(rowNumber,row,extensionStartRange){var result=this.decodeRowStringBuffer;row=this.decodeMiddle(row,extensionStartRange,result);var resultString=result.toString();result=UPCEANExtension5Support.parseExtensionString(resultString);rowNumber=[new ResultPoint_1.default((extensionStartRange[0]+
extensionStartRange[1])/2,rowNumber),new ResultPoint_1.default(row,rowNumber)];rowNumber=new Result_1.default(resultString,null,0,rowNumber,BarcodeFormat_1.default.UPC_EAN_EXTENSION,(new Date).getTime());null!=result&&rowNumber.putAllMetadata(result);return rowNumber};UPCEANExtension5Support.prototype.decodeMiddle=function(row,startRange,resultString){var e_1,_a,counters=this.decodeMiddleCounters;counters[0]=0;counters[1]=0;counters[2]=0;counters[3]=0;var end=row.getSize();startRange=startRange[1];
for(var lgPatternFound=0,x=0;5>x&&startRange<end;x++){var bestMatch=AbstractUPCEANReader_1.default.decodeDigit(row,counters,startRange,AbstractUPCEANReader_1.default.L_AND_G_PATTERNS);resultString+=String.fromCharCode(48+bestMatch%10);try{for(var counters_1=(e_1=void 0,__values(counters)),counters_1_1=counters_1.next();!counters_1_1.done;counters_1_1=counters_1.next())startRange+=counters_1_1.value}catch(e_1_1){e_1={error:e_1_1}}finally{try{counters_1_1&&!counters_1_1.done&&(_a=counters_1.return)&&
_a.call(counters_1)}finally{if(e_1)throw e_1.error;}}10<=bestMatch&&(lgPatternFound|=1<<4-x);4!==x&&(startRange=row.getNextSet(startRange),startRange=row.getNextUnset(startRange))}if(5!==resultString.length)throw new NotFoundException_1.default;row=this.determineCheckDigit(lgPatternFound);if(UPCEANExtension5Support.extensionChecksum(resultString.toString())!==row)throw new NotFoundException_1.default;return startRange};UPCEANExtension5Support.extensionChecksum=function(s){for(var length=s.length,
sum=0,i=length-2;0<=i;i-=2)sum+=s.charAt(i).charCodeAt(0)-48;sum*=3;for(i=length-1;0<=i;i-=2)sum+=s.charAt(i).charCodeAt(0)-48;return 3*sum%10};UPCEANExtension5Support.prototype.determineCheckDigit=function(lgPatternFound){for(var d=0;10>d;d++)if(lgPatternFound===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new NotFoundException_1.default;};UPCEANExtension5Support.parseExtensionString=function(raw){if(5!==raw.length)return null;raw=UPCEANExtension5Support.parseExtension5String(raw);return null==raw?
null:new Map([[ResultMetadataType_1.default.SUGGESTED_PRICE,raw]])};UPCEANExtension5Support.parseExtension5String=function(raw){switch(raw.charAt(0)){case "0":var currency="Â£";break;case "5":currency="$";break;case "9":switch(raw){case "90000":return null;case "99991":return"0.00";case "99990":return"Used"}currency="";break;default:currency=""}raw=parseInt(raw.substring(1));var hundredths=raw%100;return currency+(raw/100).toString()+"."+(10>hundredths?"0"+hundredths:hundredths.toString())};return UPCEANExtension5Support}();
exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension5Support.js.map

shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$OneDReader=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("module$node_modules$$zxing$library$cjs$core$common$BitArray"),DecodeHintType_1=require("module$node_modules$$zxing$library$cjs$core$DecodeHintType"),ResultMetadataType_1=require("module$node_modules$$zxing$library$cjs$core$ResultMetadataType"),ResultPoint_1=require("module$node_modules$$zxing$library$cjs$core$ResultPoint"),
NotFoundException_1=require("module$node_modules$$zxing$library$cjs$core$NotFoundException");global=function(){function OneDReader(){}OneDReader.prototype.decode=function(image,hints){try{return this.doDecode(image,hints)}catch(nfe){if(hints&&!0===hints.get(DecodeHintType_1.default.TRY_HARDER)&&image.isRotateSupported()){image=image.rotateCounterClockwise();hints=this.doDecode(image,hints);var metadata=hints.getResultMetadata(),orientation_1=270;null!==metadata&&!0===metadata.get(ResultMetadataType_1.default.ORIENTATION)&&
(orientation_1+=metadata.get(ResultMetadataType_1.default.ORIENTATION)%360);hints.putMetadata(ResultMetadataType_1.default.ORIENTATION,orientation_1);metadata=hints.getResultPoints();if(null!==metadata)for(image=image.getHeight(),orientation_1=0;orientation_1<metadata.length;orientation_1++)metadata[orientation_1]=new ResultPoint_1.default(image-metadata[orientation_1].getY()-1,metadata[orientation_1].getX());return hints}throw new NotFoundException_1.default;}};OneDReader.prototype.reset=function(){};
OneDReader.prototype.doDecode=function(image,hints){var width=image.getWidth(),height=image.getHeight(),row=new BitArray_1.default(width),tryHarder=hints&&!0===hints.get(DecodeHintType_1.default.TRY_HARDER),rowStep=Math.max(1,height>>(tryHarder?8:5));tryHarder=tryHarder?height:15;for(var middle=Math.trunc(height/2),x=0;x<tryHarder;x++){var rowStepsAboveOrBelow=Math.trunc((x+1)/2),rowNumber=middle+rowStep*(0===(x&1)?rowStepsAboveOrBelow:-rowStepsAboveOrBelow);if(0>rowNumber||rowNumber>=height)break;
try{row=image.getBlackRow(rowNumber,row)}catch(ignored){continue}rowStepsAboveOrBelow=function(attempt){if(1===attempt&&(row.reverse(),hints&&!0===hints.get(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK))){var newHints_1=new Map;hints.forEach(function(hint,key){return newHints_1.set(key,hint)});newHints_1.delete(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK);hints=newHints_1}try{var result=this_1.decodeRow(rowNumber,row,hints);if(1===attempt){result.putMetadata(ResultMetadataType_1.default.ORIENTATION,
180);var points=result.getResultPoints();null!==points&&(points[0]=new ResultPoint_1.default(width-points[0].getX()-1,points[0].getY()),points[1]=new ResultPoint_1.default(width-points[1].getX()-1,points[1].getY()))}return{value:result}}catch(re){}};for(var this_1=this,attempt=0;2>attempt;attempt++){var state_1=rowStepsAboveOrBelow(attempt);if("object"===typeof state_1)return state_1.value}}throw new NotFoundException_1.default;};OneDReader.recordPattern=function(row,start,counters){for(var numCounters=
counters.length,index=0;index<numCounters;index++)counters[index]=0;index=row.getSize();if(start>=index)throw new NotFoundException_1.default;for(var isWhite=!row.get(start),counterPosition=0;start<index;){if(row.get(start)!==isWhite)counters[counterPosition]++;else if(++counterPosition===numCounters)break;else counters[counterPosition]=1,isWhite=!isWhite;start++}if(counterPosition!==numCounters&&(counterPosition!==numCounters-1||start!==index))throw new NotFoundException_1.default;};OneDReader.recordPatternInReverse=
function(row,start,counters){for(var numTransitionsLeft=counters.length,last=row.get(start);0<start&&0<=numTransitionsLeft;)row.get(--start)!==last&&(numTransitionsLeft--,last=!last);if(0<=numTransitionsLeft)throw new NotFoundException_1.default;OneDReader.recordPattern(row,start+1,counters)};OneDReader.patternMatchVariance=function(counters,pattern,maxIndividualVariance){for(var numCounters=counters.length,total=0,patternLength=0,i=0;i<numCounters;i++)total+=counters[i],patternLength+=pattern[i];
if(total<patternLength)return Number.POSITIVE_INFINITY;patternLength=total/patternLength;maxIndividualVariance*=patternLength;for(var x=i=0;x<numCounters;x++){var counter=counters[x],scaledPattern=pattern[x]*patternLength;counter=counter>scaledPattern?counter-scaledPattern:scaledPattern-counter;if(counter>maxIndividualVariance)return Number.POSITIVE_INFINITY;i+=counter}return i/total};return OneDReader}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$OneDReader.js.map

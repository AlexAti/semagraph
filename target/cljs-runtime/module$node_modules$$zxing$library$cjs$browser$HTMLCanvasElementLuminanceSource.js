shadow$provide.module$node_modules$$zxing$library$cjs$browser$HTMLCanvasElementLuminanceSource=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,
b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.HTMLCanvasElementLuminanceSource=void 0;var InvertedLuminanceSource_1=require("module$node_modules$$zxing$library$cjs$core$InvertedLuminanceSource");global=require("module$node_modules$$zxing$library$cjs$core$LuminanceSource");var IllegalArgumentException_1=require("module$node_modules$$zxing$library$cjs$core$IllegalArgumentException");require=function(_super){function HTMLCanvasElementLuminanceSource(canvas){var _this=
_super.call(this,canvas.width,canvas.height)||this;_this.canvas=canvas;_this.tempCanvasElement=null;_this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(canvas);return _this}__extends(HTMLCanvasElementLuminanceSource,_super);HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData=function(canvas){var imageData=canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height);return HTMLCanvasElementLuminanceSource.toGrayscaleBuffer(imageData.data,canvas.width,canvas.height)};
HTMLCanvasElementLuminanceSource.toGrayscaleBuffer=function(imageBuffer,width,height){width=new Uint8ClampedArray(width*height);for(var j=height=0,length_1=imageBuffer.length;height<length_1;height+=4,j++)width[j]=0===imageBuffer[height+3]?255:306*imageBuffer[height]+601*imageBuffer[height+1]+117*imageBuffer[height+2]+512>>10;return width};HTMLCanvasElementLuminanceSource.prototype.getRow=function(y,row){if(0>y||y>=this.getHeight())throw new IllegalArgumentException_1.default("Requested row is outside the image: "+
y);var width=this.getWidth();y*=width;null===row?row=this.buffer.slice(y,y+width):(row.length<width&&(row=new Uint8ClampedArray(width)),row.set(this.buffer.slice(y,y+width)));return row};HTMLCanvasElementLuminanceSource.prototype.getMatrix=function(){return this.buffer};HTMLCanvasElementLuminanceSource.prototype.isCropSupported=function(){return!0};HTMLCanvasElementLuminanceSource.prototype.crop=function(left,top,width,height){_super.prototype.crop.call(this,left,top,width,height);return this};HTMLCanvasElementLuminanceSource.prototype.isRotateSupported=
function(){return!0};HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise=function(){this.rotate(-90);return this};HTMLCanvasElementLuminanceSource.prototype.rotateCounterClockwise45=function(){this.rotate(-45);return this};HTMLCanvasElementLuminanceSource.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var tempCanvasElement=this.canvas.ownerDocument.createElement("canvas");tempCanvasElement.width=this.canvas.width;tempCanvasElement.height=this.canvas.height;
this.tempCanvasElement=tempCanvasElement}return this.tempCanvasElement};HTMLCanvasElementLuminanceSource.prototype.rotate=function(angle){var tempCanvasElement=this.getTempCanvasElement(),tempContext=tempCanvasElement.getContext("2d");angle*=HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS;var width=this.canvas.width,height=this.canvas.height,newWidth=Math.ceil(Math.abs(Math.cos(angle))*width+Math.abs(Math.sin(angle))*height),newHeight=Math.ceil(Math.abs(Math.sin(angle))*width+Math.abs(Math.cos(angle))*
height);tempCanvasElement.width=newWidth;tempCanvasElement.height=newHeight;tempContext.translate(newWidth/2,newHeight/2);tempContext.rotate(angle);tempContext.drawImage(this.canvas,width/-2,height/-2);this.buffer=HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(tempCanvasElement);return this};HTMLCanvasElementLuminanceSource.prototype.invert=function(){return new InvertedLuminanceSource_1.default(this)};HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS=Math.PI/180;return HTMLCanvasElementLuminanceSource}(global.default);
exports.HTMLCanvasElementLuminanceSource=require}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$browser$HTMLCanvasElementLuminanceSource.js.map

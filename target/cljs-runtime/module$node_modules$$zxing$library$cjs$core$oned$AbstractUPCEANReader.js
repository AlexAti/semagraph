shadow$provide.module$node_modules$$zxing$library$cjs$core$oned$AbstractUPCEANReader=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);
d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OneDReader_1=require("module$node_modules$$zxing$library$cjs$core$oned$OneDReader"),NotFoundException_1=require("module$node_modules$$zxing$library$cjs$core$NotFoundException"),FormatException_1=require("module$node_modules$$zxing$library$cjs$core$FormatException");global=function(_super){function AbstractUPCEANReader(){var _this=null!==_super&&_super.apply(this,arguments)||
this;_this.decodeRowStringBuffer="";return _this}__extends(AbstractUPCEANReader,_super);AbstractUPCEANReader.findStartGuardPattern=function(row){var foundStart=!1,nextStart=0;for(Int32Array.from([0,0,0]);!foundStart;){var startRange=Int32Array.from([0,0,0]);startRange=AbstractUPCEANReader.findGuardPattern(row,nextStart,!1,this.START_END_PATTERN,startRange);var start=startRange[0];nextStart=startRange[1];var quietStart=start-(nextStart-start);0<=quietStart&&(foundStart=row.isRange(quietStart,start,
!1))}return startRange};AbstractUPCEANReader.checkChecksum=function(s){return AbstractUPCEANReader.checkStandardUPCEANChecksum(s)};AbstractUPCEANReader.checkStandardUPCEANChecksum=function(s){var length=s.length;if(0===length)return!1;var check=parseInt(s.charAt(length-1),10);return AbstractUPCEANReader.getStandardUPCEANChecksum(s.substring(0,length-1))===check};AbstractUPCEANReader.getStandardUPCEANChecksum=function(s){for(var length=s.length,sum=0,i=length-1;0<=i;i-=2){var digit=s.charAt(i).charCodeAt(0)-
48;if(0>digit||9<digit)throw new FormatException_1.default;sum+=digit}sum*=3;for(i=length-2;0<=i;i-=2){digit=s.charAt(i).charCodeAt(0)-48;if(0>digit||9<digit)throw new FormatException_1.default;sum+=digit}return(1E3-sum)%10};AbstractUPCEANReader.decodeEnd=function(row,endStart){return AbstractUPCEANReader.findGuardPattern(row,endStart,!1,AbstractUPCEANReader.START_END_PATTERN,(new Int32Array(AbstractUPCEANReader.START_END_PATTERN.length)).fill(0))};AbstractUPCEANReader.findGuardPatternWithoutCounters=
function(row,rowOffset,whiteFirst,pattern){return this.findGuardPattern(row,rowOffset,whiteFirst,pattern,new Int32Array(pattern.length))};AbstractUPCEANReader.findGuardPattern=function(row,rowOffset,whiteFirst,pattern,counters){var width=row.getSize();rowOffset=whiteFirst?row.getNextUnset(rowOffset):row.getNextSet(rowOffset);for(var counterPosition=0,patternStart=rowOffset,patternLength=pattern.length;rowOffset<width;rowOffset++)if(row.get(rowOffset)!==whiteFirst)counters[counterPosition]++;else{if(counterPosition===
patternLength-1){if(OneDReader_1.default.patternMatchVariance(counters,pattern,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE)<AbstractUPCEANReader.MAX_AVG_VARIANCE)return Int32Array.from([patternStart,rowOffset]);patternStart+=counters[0]+counters[1];for(var slice=counters.slice(2,counters.length-1),i=0;i<counterPosition-1;i++)counters[i]=slice[i];counters[counterPosition-1]=0;counters[counterPosition]=0;counterPosition--}else counterPosition++;counters[counterPosition]=1;whiteFirst=!whiteFirst}throw new NotFoundException_1.default;
};AbstractUPCEANReader.decodeDigit=function(row,counters,rowOffset,patterns){this.recordPattern(row,rowOffset,counters);row=this.MAX_AVG_VARIANCE;rowOffset=-1;for(var max=patterns.length,i=0;i<max;i++){var variance=OneDReader_1.default.patternMatchVariance(counters,patterns[i],AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE);variance<row&&(row=variance,rowOffset=i)}if(0<=rowOffset)return rowOffset;throw new NotFoundException_1.default;};AbstractUPCEANReader.MAX_AVG_VARIANCE=.48;AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE=
.7;AbstractUPCEANReader.START_END_PATTERN=Int32Array.from([1,1,1]);AbstractUPCEANReader.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]);AbstractUPCEANReader.END_PATTERN=Int32Array.from([1,1,1,1,1,1]);AbstractUPCEANReader.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];return AbstractUPCEANReader}(OneDReader_1.default);
exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$oned$AbstractUPCEANReader.js.map

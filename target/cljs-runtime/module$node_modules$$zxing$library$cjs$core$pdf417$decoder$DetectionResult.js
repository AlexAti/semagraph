shadow$provide.module$node_modules$$zxing$library$cjs$core$pdf417$decoder$DetectionResult=function(global,require,module,exports){var __values=this&&this.__values||function(o){var s="function"===typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"===typeof o.length)return{next:function(){o&&i>=o.length&&(o=void 0);return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(exports,"__esModule",
{value:!0});var PDF417Common_1=require("module$node_modules$$zxing$library$cjs$core$pdf417$PDF417Common"),Formatter_1=require("module$node_modules$$zxing$library$cjs$core$util$Formatter");global=function(){function DetectionResult(barcodeMetadata,boundingBox){this.ADJUST_ROW_NUMBER_SKIP=2;this.barcodeMetadata=barcodeMetadata;this.barcodeColumnCount=barcodeMetadata.getColumnCount();this.boundingBox=boundingBox;this.detectionResultColumns=Array(this.barcodeColumnCount+2)}DetectionResult.prototype.getDetectionResultColumns=
function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]);this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var unadjustedCodewordCount=PDF417Common_1.default.MAX_CODEWORDS_IN_BARCODE;do{var previousUnadjustedCount=unadjustedCodewordCount;unadjustedCodewordCount=this.adjustRowNumbersAndGetCount()}while(0<unadjustedCodewordCount&&unadjustedCodewordCount<previousUnadjustedCount);return this.detectionResultColumns};DetectionResult.prototype.adjustIndicatorColumnRowNumbers=
function(detectionResultColumn){null!=detectionResultColumn&&detectionResultColumn.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)};DetectionResult.prototype.adjustRowNumbersAndGetCount=function(){var unadjustedCount=this.adjustRowNumbersByRow();if(0===unadjustedCount)return 0;for(var barcodeColumn=1;barcodeColumn<this.barcodeColumnCount+1;barcodeColumn++)for(var codewords=this.detectionResultColumns[barcodeColumn].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)null!=
codewords[codewordsRow]&&(codewords[codewordsRow].hasValidRowNumber()||this.adjustRowNumbers(barcodeColumn,codewordsRow,codewords));return unadjustedCount};DetectionResult.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();return this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()};DetectionResult.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var LRIcodewords=
this.detectionResultColumns[0].getCodewords(),RRIcodewords=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),codewordsRow=0;codewordsRow<LRIcodewords.length;codewordsRow++)if(null!=LRIcodewords[codewordsRow]&&null!=RRIcodewords[codewordsRow]&&LRIcodewords[codewordsRow].getRowNumber()===RRIcodewords[codewordsRow].getRowNumber())for(var barcodeColumn=1;barcodeColumn<=this.barcodeColumnCount;barcodeColumn++){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];
null!=codeword&&(codeword.setRowNumber(LRIcodewords[codewordsRow].getRowNumber()),codeword.hasValidRowNumber()||(this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow]=null))}};DetectionResult.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var unadjustedCount=0,codewords=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)if(null!=
codewords[codewordsRow])for(var rowIndicatorRowNumber=codewords[codewordsRow].getRowNumber(),invalidRowCounts=0,barcodeColumn=this.barcodeColumnCount+1;0<barcodeColumn&&invalidRowCounts<this.ADJUST_ROW_NUMBER_SKIP;barcodeColumn--){var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword&&(invalidRowCounts=DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber,invalidRowCounts,codeword),codeword.hasValidRowNumber()||unadjustedCount++)}return unadjustedCount};
DetectionResult.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var unadjustedCount=0,codewords=this.detectionResultColumns[0].getCodewords(),codewordsRow=0;codewordsRow<codewords.length;codewordsRow++)if(null!=codewords[codewordsRow])for(var rowIndicatorRowNumber=codewords[codewordsRow].getRowNumber(),invalidRowCounts=0,barcodeColumn=1;barcodeColumn<this.barcodeColumnCount+1&&invalidRowCounts<this.ADJUST_ROW_NUMBER_SKIP;barcodeColumn++){var codeword=
this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null!=codeword&&(invalidRowCounts=DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber,invalidRowCounts,codeword),codeword.hasValidRowNumber()||unadjustedCount++)}return unadjustedCount};DetectionResult.adjustRowNumberIfValid=function(rowIndicatorRowNumber,invalidRowCounts,codeword){if(null==codeword)return invalidRowCounts;codeword.hasValidRowNumber()||(codeword.isValidRowNumber(rowIndicatorRowNumber)?(codeword.setRowNumber(rowIndicatorRowNumber),
invalidRowCounts=0):++invalidRowCounts);return invalidRowCounts};DetectionResult.prototype.adjustRowNumbers=function(barcodeColumn,codewordsRow,codewords){var _a;if(null!=this.detectionResultColumns[barcodeColumn-1]){var codeword=codewords[codewordsRow],previousColumnCodewords=this.detectionResultColumns[barcodeColumn-1].getCodewords(),nextColumnCodewords=previousColumnCodewords;null!=this.detectionResultColumns[barcodeColumn+1]&&(nextColumnCodewords=this.detectionResultColumns[barcodeColumn+1].getCodewords());
barcodeColumn=Array(14);barcodeColumn[2]=previousColumnCodewords[codewordsRow];barcodeColumn[3]=nextColumnCodewords[codewordsRow];0<codewordsRow&&(barcodeColumn[0]=codewords[codewordsRow-1],barcodeColumn[4]=previousColumnCodewords[codewordsRow-1],barcodeColumn[5]=nextColumnCodewords[codewordsRow-1]);1<codewordsRow&&(barcodeColumn[8]=codewords[codewordsRow-2],barcodeColumn[10]=previousColumnCodewords[codewordsRow-2],barcodeColumn[11]=nextColumnCodewords[codewordsRow-2]);codewordsRow<codewords.length-
1&&(barcodeColumn[1]=codewords[codewordsRow+1],barcodeColumn[6]=previousColumnCodewords[codewordsRow+1],barcodeColumn[7]=nextColumnCodewords[codewordsRow+1]);codewordsRow<codewords.length-2&&(barcodeColumn[9]=codewords[codewordsRow+2],barcodeColumn[12]=previousColumnCodewords[codewordsRow+2],barcodeColumn[13]=nextColumnCodewords[codewordsRow+2]);try{for(var otherCodewords_1=__values(barcodeColumn),otherCodewords_1_1=otherCodewords_1.next();!otherCodewords_1_1.done&&!DetectionResult.adjustRowNumber(codeword,
otherCodewords_1_1.value);otherCodewords_1_1=otherCodewords_1.next());}catch(e_1_1){var e_1={error:e_1_1}}finally{try{otherCodewords_1_1&&!otherCodewords_1_1.done&&(_a=otherCodewords_1.return)&&_a.call(otherCodewords_1)}finally{if(e_1)throw e_1.error;}}}};DetectionResult.adjustRowNumber=function(codeword,otherCodeword){return null==otherCodeword?!1:otherCodeword.hasValidRowNumber()&&otherCodeword.getBucket()===codeword.getBucket()?(codeword.setRowNumber(otherCodeword.getRowNumber()),!0):!1};DetectionResult.prototype.getBarcodeColumnCount=
function(){return this.barcodeColumnCount};DetectionResult.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()};DetectionResult.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()};DetectionResult.prototype.setBoundingBox=function(boundingBox){this.boundingBox=boundingBox};DetectionResult.prototype.getBoundingBox=function(){return this.boundingBox};DetectionResult.prototype.setDetectionResultColumn=function(barcodeColumn,detectionResultColumn){this.detectionResultColumns[barcodeColumn]=
detectionResultColumn};DetectionResult.prototype.getDetectionResultColumn=function(barcodeColumn){return this.detectionResultColumns[barcodeColumn]};DetectionResult.prototype.toString=function(){var rowIndicatorColumn=this.detectionResultColumns[0];null==rowIndicatorColumn&&(rowIndicatorColumn=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var formatter=new Formatter_1.default,codewordsRow=0;codewordsRow<rowIndicatorColumn.getCodewords().length;codewordsRow++){formatter.format("CW %3d:",
codewordsRow);for(var barcodeColumn=0;barcodeColumn<this.barcodeColumnCount+2;barcodeColumn++)if(null==this.detectionResultColumns[barcodeColumn])formatter.format("    |   ");else{var codeword=this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];null==codeword?formatter.format("    |   "):formatter.format(" %3d|%3d",codeword.getRowNumber(),codeword.getValue())}formatter.format("%n")}return formatter.toString()};return DetectionResult}();exports.default=global}
//# sourceMappingURL=module$node_modules$$zxing$library$cjs$core$pdf417$decoder$DetectionResult.js.map

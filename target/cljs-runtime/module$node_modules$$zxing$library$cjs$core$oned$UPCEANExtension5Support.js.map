{
"version":3,
"file":"module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension5Support.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@zxing/library/cjs/core/oned/UPCEANExtension5Support.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$zxing$library$cjs$core$oned$UPCEANExtension5Support\"] = function(global,require,module,exports) {\n\"use strict\";\n/*\n * Copyright (C) 2010 ZXing authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BarcodeFormat_1 = require(\"../BarcodeFormat\");\n// import UPCEANReader from './UPCEANReader';\nvar AbstractUPCEANReader_1 = require(\"./AbstractUPCEANReader\");\nvar Result_1 = require(\"../Result\");\nvar ResultPoint_1 = require(\"../ResultPoint\");\nvar ResultMetadataType_1 = require(\"../ResultMetadataType\");\nvar NotFoundException_1 = require(\"../NotFoundException\");\n/**\n * @see UPCEANExtension2Support\n */\nvar UPCEANExtension5Support = /** @class */ (function () {\n    function UPCEANExtension5Support() {\n        this.CHECK_DIGIT_ENCODINGS = [0x18, 0x14, 0x12, 0x11, 0x0C, 0x06, 0x03, 0x0A, 0x09, 0x05];\n        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);\n        this.decodeRowStringBuffer = '';\n    }\n    UPCEANExtension5Support.prototype.decodeRow = function (rowNumber, row, extensionStartRange) {\n        var result = this.decodeRowStringBuffer;\n        var end = this.decodeMiddle(row, extensionStartRange, result);\n        var resultString = result.toString();\n        var extensionData = UPCEANExtension5Support.parseExtensionString(resultString);\n        var resultPoints = [\n            new ResultPoint_1.default((extensionStartRange[0] + extensionStartRange[1]) / 2.0, rowNumber),\n            new ResultPoint_1.default(end, rowNumber)\n        ];\n        var extensionResult = new Result_1.default(resultString, null, 0, resultPoints, BarcodeFormat_1.default.UPC_EAN_EXTENSION, new Date().getTime());\n        if (extensionData != null) {\n            extensionResult.putAllMetadata(extensionData);\n        }\n        return extensionResult;\n    };\n    UPCEANExtension5Support.prototype.decodeMiddle = function (row, startRange, resultString) {\n        var e_1, _a;\n        var counters = this.decodeMiddleCounters;\n        counters[0] = 0;\n        counters[1] = 0;\n        counters[2] = 0;\n        counters[3] = 0;\n        var end = row.getSize();\n        var rowOffset = startRange[1];\n        var lgPatternFound = 0;\n        for (var x = 0; x < 5 && rowOffset < end; x++) {\n            var bestMatch = AbstractUPCEANReader_1.default.decodeDigit(row, counters, rowOffset, AbstractUPCEANReader_1.default.L_AND_G_PATTERNS);\n            resultString += String.fromCharCode(('0'.charCodeAt(0) + bestMatch % 10));\n            try {\n                for (var counters_1 = (e_1 = void 0, __values(counters)), counters_1_1 = counters_1.next(); !counters_1_1.done; counters_1_1 = counters_1.next()) {\n                    var counter = counters_1_1.value;\n                    rowOffset += counter;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (counters_1_1 && !counters_1_1.done && (_a = counters_1.return)) _a.call(counters_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (bestMatch >= 10) {\n                lgPatternFound |= 1 << (4 - x);\n            }\n            if (x !== 4) {\n                // Read off separator if not last\n                rowOffset = row.getNextSet(rowOffset);\n                rowOffset = row.getNextUnset(rowOffset);\n            }\n        }\n        if (resultString.length !== 5) {\n            throw new NotFoundException_1.default();\n        }\n        var checkDigit = this.determineCheckDigit(lgPatternFound);\n        if (UPCEANExtension5Support.extensionChecksum(resultString.toString()) !== checkDigit) {\n            throw new NotFoundException_1.default();\n        }\n        return rowOffset;\n    };\n    UPCEANExtension5Support.extensionChecksum = function (s) {\n        var length = s.length;\n        var sum = 0;\n        for (var i = length - 2; i >= 0; i -= 2) {\n            sum += s.charAt(i).charCodeAt(0) - '0'.charCodeAt(0);\n        }\n        sum *= 3;\n        for (var i = length - 1; i >= 0; i -= 2) {\n            sum += s.charAt(i).charCodeAt(0) - '0'.charCodeAt(0);\n        }\n        sum *= 3;\n        return sum % 10;\n    };\n    UPCEANExtension5Support.prototype.determineCheckDigit = function (lgPatternFound) {\n        for (var d = 0; d < 10; d++) {\n            if (lgPatternFound === this.CHECK_DIGIT_ENCODINGS[d]) {\n                return d;\n            }\n        }\n        throw new NotFoundException_1.default();\n    };\n    UPCEANExtension5Support.parseExtensionString = function (raw) {\n        if (raw.length !== 5) {\n            return null;\n        }\n        var value = UPCEANExtension5Support.parseExtension5String(raw);\n        if (value == null) {\n            return null;\n        }\n        return new Map([[ResultMetadataType_1.default.SUGGESTED_PRICE, value]]);\n    };\n    UPCEANExtension5Support.parseExtension5String = function (raw) {\n        var currency;\n        switch (raw.charAt(0)) {\n            case '0':\n                currency = '\u00a3';\n                break;\n            case '5':\n                currency = '$';\n                break;\n            case '9':\n                // Reference: http://www.jollytech.com\n                switch (raw) {\n                    case '90000':\n                        // No suggested retail price\n                        return null;\n                    case '99991':\n                        // Complementary\n                        return '0.00';\n                    case '99990':\n                        return 'Used';\n                }\n                // Otherwise... unknown currency?\n                currency = '';\n                break;\n            default:\n                currency = '';\n                break;\n        }\n        var rawAmount = parseInt(raw.substring(1));\n        var unitsString = (rawAmount / 100).toString();\n        var hundredths = rawAmount % 100;\n        var hundredthsString = hundredths < 10 ? '0' + hundredths : hundredths.toString(); // fixme\n        return currency + unitsString + '.' + hundredthsString;\n    };\n    return UPCEANExtension5Support;\n}());\nexports.default = UPCEANExtension5Support;\n//# sourceMappingURL=UPCEANExtension5Support.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","Object","defineProperty","BarcodeFormat_1","AbstractUPCEANReader_1","Result_1","ResultPoint_1","ResultMetadataType_1","NotFoundException_1","UPCEANExtension5Support","CHECK_DIGIT_ENCODINGS","decodeMiddleCounters","Int32Array","from","decodeRowStringBuffer","prototype","decodeRow","UPCEANExtension5Support.prototype.decodeRow","rowNumber","row","extensionStartRange","result","end","decodeMiddle","resultString","toString","extensionData","parseExtensionString","resultPoints","default","extensionResult","UPC_EAN_EXTENSION","getTime","Date","putAllMetadata","UPCEANExtension5Support.prototype.decodeMiddle","startRange","e_1","_a","counters","getSize","rowOffset","lgPatternFound","x","bestMatch","decodeDigit","L_AND_G_PATTERNS","String","fromCharCode","counters_1","counters_1_1","e_1_1","error","return","getNextSet","getNextUnset","checkDigit","determineCheckDigit","extensionChecksum","UPCEANExtension5Support.extensionChecksum","sum","charAt","charCodeAt","UPCEANExtension5Support.prototype.determineCheckDigit","d","UPCEANExtension5Support.parseExtensionString","raw","parseExtension5String","Map","SUGGESTED_PRICE","UPCEANExtension5Support.parseExtension5String","currency","rawAmount","parseInt","substring","hundredths","unitsString","hundredthsString"]
}
